---
title: "Story lenght statistics, pre- and post-editing"
output: html_notebook
---
```{r "setup", include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "..")
source("../R/retrieve_data.R")
```

Raw and edited versions of stories are stored in separate Google Sheets.

Start by retrieving the data. The keys to the appropriate Google Sheets are encrypted in the vault. Out-of-band authentication may be needed to
access Google Sheets.

```{r, results='hide'}
stories.raw = retrieve_sheet_data("s1_raw_stories")
stories.edited = retrieve_sheet_data("s1_edited_stories")
```

Now merge:
```{r}
stories.raw = stories.raw %>% 
  select(id, raw = story)
stories.edited = stories.edited %>%
  select(id, edited = story)
stories = stories.raw %>% 
  left_join(stories.edited)
```
Now we can add word counts to each row, and then calculate mean word counts (and respective SD's) for either raw or edited stories.
```{r}
stories.wc = 
  stories %>% 
  mutate(raw.wc = str_count(raw), edited.wc = str_count(edited)) 

stories.wc %>%
  summarise(
    mean(raw.wc), 
    sd(raw.wc), 
    mean(edited.wc), 
    sd(edited.wc))
```

Are word counts significantly different?

```{r}
t.test(stories.wc$raw.wc, 
       stories.wc$edited.wc)
```

